
import { ModuleData, ModuleId, LessonNode, QuizQuestion } from './types';

// SVG Paths for Triangles
const SVG_EQUILATERAL = "M 50 15 L 90 85 L 10 85 Z";
const SVG_ISOSCELES = "M 50 10 L 75 90 L 25 90 Z"; // Narrower base
const SVG_SCALENE = "M 30 10 L 90 90 L 10 90 Z"; // Skewed top
const SVG_RIGHT = "M 20 20 L 20 80 L 80 80 Z";
const SVG_OBTUSE = "M 25 80 L 90 80 L 5 30 Z"; // Corrected Obtuse (Angle > 90)
const SVG_ACUTE = "M 50 10 L 85 85 L 15 85 Z";

const TYPES_LESSON: LessonNode = {
  id: 'root',
  title: 'Поделба на триаголници',
  content: 'Триаголник е геометриска фигура со три страни и три агли. Триаголниците ги делиме според два критериуми.',
  children: [
    {
      id: 'sides',
      title: 'Според страни',
      content: 'Според должината на страните, разликуваме три вида:',
      parentId: 'root',
      children: [
        {
          id: 'equilateral',
          title: 'Рамностран',
          content: 'Сите три страни се еднакви ($a=b=c$). Сите агли се по $60^{\\circ}$.',
          parentId: 'sides'
        },
        {
          id: 'isosceles',
          title: 'Рамнокрак',
          content: 'Две страни се еднакви ($a=b$). Аглите при основата се еднакви.',
          parentId: 'sides'
        },
        {
          id: 'scalene',
          title: 'Разностран',
          content: 'Сите три страни се различни.',
          parentId: 'sides'
        }
      ]
    },
    {
      id: 'angles',
      title: 'Според агли',
      content: 'Според големината на аглите, разликуваме:',
      parentId: 'root',
      children: [
        {
          id: 'acute',
          title: 'Остроаголен',
          content: 'Сите агли се помали од $90^{\\circ}$.',
          parentId: 'angles'
        },
        {
          id: 'right',
          title: 'Правоаголен',
          content: 'Има еден прав агол ($90^{\\circ}$). Страната спроти него е хипотенуза.',
          parentId: 'angles'
        },
        {
          id: 'obtuse',
          title: 'Тапоаголен',
          content: 'Има еден тап агол (поголем од $90^{\\circ}$).',
          parentId: 'angles'
        }
      ]
    }
  ]
};

const ANGLES_LESSON: LessonNode = {
  id: 'root_angles',
  title: 'Внатрешни агли',
  content: 'Збирот на внатрешните агли во секој триаголник е 180 степени.',
  children: [
    {
      id: 'sum',
      title: 'Теорема',
      content: 'Збирот на аглите во триаголник е секогаш $180^{\\circ}$.',
      parentId: 'root_angles'
    },
    {
      id: 'proof',
      title: 'Зошто?',
      content: 'Ако повлечеме права паралелна со една страна низ спротивното теме, ќе видиме дека аглите формираат рамен агол ($180^{\\circ}$).',
      parentId: 'root_angles'
    }
  ]
};

const EXTERNAL_ANGLES_LESSON: LessonNode = {
  id: 'root_ext',
  title: 'Надворешни агли',
  content: 'Надворешен агол е аголот што го формира една страна со продолжението на соседната страна.',
  children: [
    {
      id: 'intro_def',
      title: 'Дефиниција',
      content: 'Кликни на копчето за да видиш како се добиваат надворешните агли со продолжување на страните.',
      parentId: 'root_ext'
    },
    {
      id: 'def',
      title: 'Збир на внатрешен и надворешен агол',
      content: 'Надворешниот агол и внатрешниот агол при исто теме се суплементни (збирот им е $180^{\\circ}$).',
      parentId: 'root_ext'
    },
    {
      id: 'sum_ext',
      title: 'Збир',
      content: 'Збирот на надворешните агли во триаголник изнесува $360^{\\circ}$.',
      parentId: 'root_ext'
    },
    {
      id: 'relation',
      title: 'Врска',
      content: 'Надворешен агол е еднаков на збирот на двата внатрешни несоседни агли.',
      parentId: 'root_ext'
    }
  ]
};

const MIDDLE_LINE_LESSON: LessonNode = {
  id: 'root_mid',
  title: 'Средна линија',
  content: 'Средна линија на триаголник е отсечка која ги поврзува средините на две страни на триаголникот.',
  children: [
    {
      id: 'mid_def',
      title: 'Дефиниција',
      content: 'Точките $D$ и $E$ се средини на страните. Отсечката $DE$ е средна линија.',
      parentId: 'root_mid'
    },
    {
      id: 'mid_prop',
      title: 'Својства',
      content: 'Средната линија има две клучни својства во однос на третата страна:',
      parentId: 'root_mid',
      children: [
        {
          id: 'prop_parallel',
          title: 'Паралелност',
          content: 'Средната линија е **паралелна** со третата страна ($DE || AB$).',
          parentId: 'mid_prop'
        },
        {
          id: 'prop_length',
          title: 'Должина',
          content: 'Средната линија е еднаква на **половина** од третата страна ($DE = \\frac{1}{2}AB$).',
          parentId: 'mid_prop'
        }
      ]
    }
  ]
};

const CENTROID_LESSON: LessonNode = {
  id: 'root_cent',
  title: 'Тежиште',
  content: 'Тежишната линија (медијана) ги поврзува темето и средината на спротивната страна. Трите тежишни линии се сечат во една точка.',
  children: [
    {
      id: 'cent_def',
      title: 'Тежишна линија',
      content: 'Отсечката што го поврзува темето со средината на спротивната страна се вика **тежишна линија**.',
      parentId: 'root_cent'
    },
    {
      id: 'cent_point',
      title: 'Тежиште (T)',
      content: 'Трите тежишни линии се сечат во една точка која се вика **Тежиште**. Тоа е центарот на рамнотежа на триаголникот.',
      parentId: 'root_cent'
    },
    {
      id: 'cent_ratio',
      title: 'Сооднос 2:1',
      content: 'Тежиштето ја дели секоја тежишна линија во сооднос **2:1**. Делот од темето до тежиштето е два пати подолг од делот од тежиштето до страната.',
      parentId: 'root_cent'
    }
  ]
};

const ORTHOCENTER_LESSON: LessonNode = {
  id: 'root_ortho',
  title: 'Ортоцентар',
  content: 'Висина е отсечка спуштена од темето нормално на спротивната страна. Трите висини се сечат во Ортоцентар.',
  children: [
    {
      id: 'ortho_def',
      title: 'Висина',
      content: 'Висината секогаш формира прав агол ($90^{\\circ}$) со страната на која е спуштена.',
      parentId: 'root_ortho'
    },
    {
      id: 'ortho_point',
      title: 'Ортоцентар (H)',
      content: 'Точката во која се сечат трите висини се вика **Ортоцентар**.',
      parentId: 'root_ortho'
    },
    {
      id: 'ortho_pos',
      title: 'Положба',
      content: 'Кај остроаголен триаголник е внатре, кај правоаголен е во темето на правиот агол, а кај тапоаголен е надвор.',
      parentId: 'root_ortho'
    }
  ]
};

const CIRCUMCIRCLE_LESSON: LessonNode = {
  id: 'root_circum',
  title: 'Опишана кружница',
  content: 'Опишана кружница е кружница која поминува низ сите три темиња на триаголникот.',
  children: [
    {
      id: 'circum_def',
      title: 'Дефиниција',
      content: 'Кружницата што поминува низ темињата A, B и C се вика **Опишана кружница**. Нејзиниот радиус се означува со $R$.',
      parentId: 'root_circum'
    },
    {
      id: 'circum_const',
      title: 'Центар (O)',
      content: 'Центарот на опишаната кружница се добива во пресекот на **симетралите на страните**. Симетрала е права што ја преполовува страната под прав агол.',
      parentId: 'root_circum'
    },
    {
      id: 'circum_pos',
      title: 'Положба на центарот',
      content: 'Центарот не е секогаш внатре! Кај правоаголен триаголник тој е точно на средината на хипотенузата.',
      parentId: 'root_circum'
    }
  ]
};

const INCIRCLE_LESSON: LessonNode = {
  id: 'root_incircle',
  title: 'Впишана кружница',
  content: 'Впишана кружница е кружница која се наоѓа внатре во триаголникот и ги допира сите три страни.',
  children: [
    {
      id: 'incircle_def',
      title: 'Дефиниција',
      content: 'Кружницата што ги допира трите страни од внатрешната страна се вика **Впишана кружница**. Нејзиниот радиус се означува со $r$.',
      parentId: 'root_incircle'
    },
    {
      id: 'incircle_const',
      title: 'Центар (V)',
      content: 'Центарот на впишаната кружница се добива во пресекот на **симетралите на аглите**. Симетрала на агол е права што го дели аголот на два еднакви дела.',
      parentId: 'root_incircle'
    },
    {
      id: 'incircle_pos',
      title: 'Секогаш внатре',
      content: 'За разлика од опишаната кружница, центарот на впишаната кружница **секогаш** се наоѓа во внатрешноста на триаголникот.',
      parentId: 'root_incircle'
    }
  ]
};

const EXISTENCE_LESSON: LessonNode = {
  id: 'root_exist',
  title: 'Егзистенција на триаголник',
  content: 'Дали секои три отсечки можат да формираат триаголник? Одговорот лежи во **неравенството на триаголник**.',
  children: [
    {
      id: 'exist_rule',
      title: 'Основно правило',
      content: 'За да постои триаголник, збирот на кои било две страни мора да биде **поголем** од третата страна.\n\n$a + b > c$',
      parentId: 'root_exist'
    },
    {
      id: 'exist_visual',
      title: 'Зошто?',
      content: 'Замисли дека страните се стапчиња. Ако две стапчиња се прекратки, тие не можат да се "гушнат" (спојат) за да го затворат триаголникот.',
      parentId: 'root_exist'
    },
    {
      id: 'exist_diff',
      title: 'Правило за разлика',
      content: 'Исто така важи: Секоја страна е **поголема** од разликата на другите две.\n\n$c > |a - b|$',
      parentId: 'root_exist'
    }
  ]
};

const SIDE_ANGLE_RELATION_LESSON: LessonNode = {
  id: 'root_rel',
  title: 'Однос страни и агли',
  content: 'Како се поврзани големината на аглите и должината на страните во еден триаголник?',
  children: [
    {
      id: 'rel_rule',
      title: 'Основно правило',
      content: 'Наспроти **поголем агол** лежи **поголема страна**, и обратно.\n\nАко $\\alpha > \\beta$, тогаш $a > b$.',
      parentId: 'root_rel'
    },
    {
      id: 'rel_visual',
      title: 'Аналогија со врата',
      content: 'Замисли ја вратата како една страна, а рамката како друга. Колку повеќе ја отвориш вратата (поголем агол), толку поголемо е растојанието меѓу крајот на вратата и рамката (третата страна).',
      parentId: 'root_rel'
    },
    {
      id: 'rel_special',
      title: 'Специјални случаи',
      content: 'Кај правоаголен триаголник, правиот агол ($90^{\\circ}$) е најголем. Затоа, страната наспроти него (**хипотенузата**) е секогаш најдолга.',
      parentId: 'root_rel'
    }
  ]
};

const FINAL_REVIEW_LESSON: LessonNode = {
  id: 'final_root',
  title: 'Завршна проверка',
  content: 'Честитки! Ги помина сите лекции за триаголници. Сега е време да го тестираш своето знаење преку овој сеопфатен тест кој ги вклучува сите научени концепти.',
  children: []
};

const TYPES_QUIZ: QuizQuestion[] = [
  {
    id: 'drag_sides',
    type: 'DRAG_DROP',
    question: 'Игра: Смести ги триаголниците во вистинската кутија според страните!',
    buckets: ['Рамностран', 'Рамнокрак', 'Разностран'],
    items: [
      { id: 't1', content: SVG_EQUILATERAL, category: 'Рамностран' },
      { id: 't2', content: SVG_ISOSCELES, category: 'Рамнокрак' },
      { id: 't3', content: SVG_SCALENE, category: 'Разностран' },
      { id: 't4', content: SVG_EQUILATERAL, category: 'Рамностран' },
      { id: 't5', content: SVG_SCALENE, category: 'Разностран' }
    ]
  },
  {
    id: 'drag_angles',
    type: 'DRAG_DROP',
    question: 'Игра: Смести ги триаголниците во вистинската кутија според аглите!',
    buckets: ['Остроаголен', 'Правоаголен', 'Тапоаголен'],
    items: [
      { id: 'a1', content: SVG_RIGHT, category: 'Правоаголен' },
      { id: 'a2', content: SVG_ACUTE, category: 'Остроаголен' },
      { id: 'a3', content: SVG_OBTUSE, category: 'Тапоаголен' },
      { id: 'a4', content: SVG_RIGHT, category: 'Правоаголен' }
    ]
  },
  {
    id: 'q_sides_calc',
    type: 'MCQ',
    question: 'Даден е триаголник со страни a=5cm, b=5cm, c=8cm. Каков е овој триаголник?',
    options: ['Рамностран', 'Рамнокрак', 'Разностран', 'Правоаголен'],
    correctIndex: 1,
    explanation: 'Бидејќи има две страни со иста должина (5cm), тој е рамнокрак.'
  },
  {
    id: 'q_angles_calc',
    type: 'MCQ',
    question: 'Триаголник има агли од 30°, 60° и 90°. Каков е според аглите?',
    options: ['Остроаголен', 'Тапоаголен', 'Правоаголен', 'Рамностран'],
    correctIndex: 2,
    explanation: 'Бидејќи еден агол е 90 степени, триаголникот е правоаголен.'
  }
];

export const MODULES: ModuleData[] = [
  {
    id: ModuleId.TYPES,
    title: 'Видови триаголници',
    description: 'Научи како да ги препознаваш триаголниците според нивните страни и агли.',
    goals: [
        'Да ги препознаваш рамностраниот, рамнокракиот и разностраниот триаголник.',
        'Да ги разликуваш остроаголниот, правоаголниот и тапоаголниот триаголник.',
        'Да знаеш кои својства важат за страните и аглите кај секој вид.'
    ],
    icon: 'triangle',
    color: 'bg-blue-500',
    lessonRoot: TYPES_LESSON,
    quiz: TYPES_QUIZ
  },
  {
    id: ModuleId.INTERNAL_ANGLES,
    title: 'Збир на внатрешни агли',
    description: 'Истражи го магичниот број 180 кај триаголниците.',
    goals: [
        'Да научиш дека збирот на внатрешните агли во секој триаголник е 180°.',
        'Да пресметуваш непознат агол ако се дадени другите два.',
        'Да ги знаеш специфичните правила за агли кај рамностран и рамнокрак триаголник.'
    ],
    icon: 'compass',
    color: 'bg-emerald-500',
    lessonRoot: ANGLES_LESSON,
    quiz: [
      {
        id: 'ang_q1',
        type: 'MCQ',
        question: 'Ниво 1: Во триаголник два агли се 60° и 50°. Колку изнесува третиот агол?',
        options: ['60°', '70°', '80°', '90°'],
        correctIndex: 1,
        hint: 'Собери ги двата дадени агли и одземи го збирот од 180.',
        explanation: '180° - (60° + 50°) = 180° - 110° = 70°.'
      },
      {
        id: 'ang_q2',
        type: 'INPUT',
        question: 'Ниво 2: Во правоаголен триаголник еден остар агол е 40°. Колку степени има другиот остар агол?',
        correctAnswer: '50',
        hint: 'Правоаголен триаголник има еден агол од 90°. Значи, 180 - (90 + 40) = ?',
        explanation: 'Збирот на острите агли во правоаголен триаголник е 90°. 90 - 40 = 50.'
      },
      {
        id: 'ang_q3',
        type: 'MCQ',
        question: 'Ниво 3: Во рамнокрак триаголник, аголот при врвот е 40°. Колку изнесува еден агол при основата?',
        options: ['40°', '70°', '140°', '60°'],
        correctIndex: 1,
        hint: 'Кај рамнокрак триаголник, аглите при основата се еднакви. (180 - 40) : 2',
        explanation: '(180° - 40°) / 2 = 140° / 2 = 70°.'
      },
      {
        id: 'ang_q4',
        type: 'INPUT',
        question: 'Ниво 4: Аглите во еден триаголник се однесуваат како 1:2:3. Колку степени има најголемиот агол?',
        correctAnswer: '90',
        hint: 'Означи ги аглите со x, 2x и 3x. Нивниот збир е 180. Најди го x, па пресметај го најголемиот (3x).',
        explanation: 'x + 2x + 3x = 180 => 6x = 180 => x = 30. Најголемиот е 3 * 30 = 90 степени.'
      },
      {
        id: 'ang_q5',
        type: 'INPUT',
        question: 'Ниво 5: Првиот агол е 40°. Вториот агол е за 20° поголем од првиот. Пресметај го третиот агол.',
        correctAnswer: '80',
        hint: 'Прво пресметај го вториот агол (40 + 20). Потоа одземи ги двата од 180.',
        explanation: 'Агол 1 = 40°. Агол 2 = 60°. Агол 3 = 180 - (40+60) = 80°.'
      }
    ]
  },
  {
    id: ModuleId.EXTERNAL_ANGLES,
    title: 'Збир на надворешни агли',
    description: 'Што се случува надвор од триаголникот?',
    goals: [
        'Да разбереш што е надворешен агол и како се добива.',
        'Да знаеш дека збирот на внатрешен и соодветен надворешен агол е 180°.',
        'Да ја применуваш теоремата дека надворешниот агол е еднаков на збирот на двата внатрешни несоседни агли.'
    ],
    icon: 'maximize',
    color: 'bg-amber-500',
    lessonRoot: EXTERNAL_ANGLES_LESSON,
    quiz: [
      {
        id: 'q_ext_1',
        type: 'MCQ',
        question: 'Ниво 1: Колку изнесува збирот на надворешните агли во секој триаголник?',
        options: ['180°', '360°', '90°', '540°'],
        correctIndex: 1,
        explanation: 'Збирот на надворешните агли кај секој конвексен многуаголник (вклучително и триаголник) е секогаш 360°.'
      },
      {
        id: 'q_ext_2',
        type: 'MCQ',
        question: 'Ниво 2: Ако внатрешниот агол е 70°, колку изнесува неговиот соодветен надворешен агол?',
        options: ['70°', '110°', '20°', '90°'],
        correctIndex: 1,
        hint: 'Внатрешниот и надворешниот агол лежат на права (суплементни се). 180 - 70 = ?',
        explanation: 'Тие лежат на права, па нивниот збир е 180°. 180° - 70° = 110°.'
      },
      {
        id: 'q_ext_3',
        type: 'INPUT',
        question: 'Ниво 3: Двата внатрешни агли се 50° и 60°. Колку изнесува надворешниот агол кај третото теме?',
        correctAnswer: '110',
        hint: 'Надворешниот агол е еднаков на збирот на двата внатрешни несоседни агли.',
        explanation: 'Според теоремата за надворешен агол: 50° + 60° = 110°.'
      },
      {
        id: 'q_ext_4',
        type: 'MCQ',
        question: 'Ниво 4: Надворешниот агол е 120°. Еден од несоседните внатрешни агли е 40°. Колку е другиот несоседен внатрешен агол?',
        options: ['80°', '40°', '160°', '60°'],
        correctIndex: 0,
        hint: 'Надворешниот (120°) е збир на двата внатрешни (40° + x). Значи x = 120 - 40.',
        explanation: '120° = 40° + x. Значи x = 120° - 40° = 80°.'
      },
      {
        id: 'q_ext_5',
        type: 'INPUT',
        question: 'Ниво 5: Во рамностран триаголник, колку степени изнесува секој надворешен агол?',
        correctAnswer: '120',
        hint: 'Внатрешните агли во рамностран триаголник се по 60°. Надворешниот е суплементарен (180 - 60).',
        explanation: 'Внатрешниот е 60°. Надворешниот е 180° - 60° = 120°. Проверка: 3 * 120° = 360°.'
      }
    ]
  },
  {
    id: ModuleId.MIDDLE_LINE,
    title: 'Средна линија',
    description: 'Научи што е средна линија и кои се нејзините својства.',
    goals: [
        'Да дефинираш што е средна линија на триаголник.',
        'Да научиш дека средната линија е паралелна со спротивната страна.',
        'Да примениш дека должината на средната линија е половина од спротивната страна.'
    ],
    icon: 'activity',
    color: 'bg-indigo-500',
    lessonRoot: MIDDLE_LINE_LESSON,
    quiz: [
      {
        id: 'q_mid_1',
        type: 'MCQ',
        question: 'Што поврзува средната линија на еден триаголник?',
        options: ['Две темиња', 'Средина на страна со спротивно теме', 'Средините на две страни', 'Центарот со теме'],
        correctIndex: 2,
        explanation: 'По дефиниција, средната линија ги поврзува средишните точки на две страни.'
      },
      {
        id: 'q_mid_2',
        type: 'INPUT',
        question: 'Ако основата на триаголникот е 10cm, колку сантиметри е средната линија паралелна со неа?',
        correctAnswer: '5',
        hint: 'Средната линија е половина од страната со која е паралелна.',
        explanation: '10 / 2 = 5cm.'
      },
      {
        id: 'q_mid_3',
        type: 'INPUT',
        question: 'Средната линија има должина 4cm. Колку изнесува должината на паралелната страна?',
        correctAnswer: '8',
        hint: 'Страната е двапати подолга од средната линија.',
        explanation: '4 * 2 = 8cm.'
      },
      {
        id: 'q_mid_4',
        type: 'MCQ',
        question: 'Периметарот на големиот триаголник е 20cm. Колку е периметарот на триаголникот формиран од трите средни линии?',
        options: ['20cm', '10cm', '5cm', '40cm'],
        correctIndex: 1,
        hint: 'Секоја средна линија е половина од соодветната страна. Значи и периметарот е половина.',
        explanation: 'Периметарот на триаголникот од средни линии е половина од периметарот на големиот триаголник. 20 / 2 = 10cm.'
      }
    ]
  },
  {
    id: ModuleId.CENTROID,
    title: 'Тежиште',
    description: 'Истражи каде се сечат тежишните линии и кој е нивниот магичен сооднос.',
    goals: [
        'Да знаеш што е тежишна линија (медијана).',
        'Да научиш дека тежиштето е пресекот на трите тежишни линии.',
        'Да го примениш правилото дека тежиштето ја дели медијаната во сооднос 2:1.'
    ],
    icon: 'target',
    color: 'bg-rose-500',
    lessonRoot: CENTROID_LESSON,
    quiz: [
      {
        id: 'q_cen_1',
        type: 'MCQ',
        question: 'Што поврзува една тежишна линија?',
        options: ['Две темиња', 'Средините на две страни', 'Теме и средина на спротивна страна', 'Центарот со теме'],
        correctIndex: 2,
        explanation: 'Тежишната линија (медијана) оди од темето до средината на спротивната страна.'
      },
      {
        id: 'q_cen_2',
        type: 'MCQ',
        question: 'Во кој сооднос тежиштето ја дели тежишната линија?',
        options: ['1:1 (на половина)', '2:1 (поголемиот дел е кон темето)', '3:1', 'Нема правило'],
        correctIndex: 1,
        explanation: 'Тежиштето ја дели секоја медијана во однос 2:1, мерејќи од темето.'
      },
      {
        id: 'q_cen_3',
        type: 'INPUT',
        question: 'Целата тежишна линија е долга 12cm. Колку е долг делот од темето до тежиштето?',
        correctAnswer: '8',
        hint: 'Соодносот е 2:1, што значи има вкупно 3 дела. 12 / 3 = 4. Делот до темето се 2 дела.',
        explanation: '1 дел = 12/3 = 4cm. Делот до темето е 2 дела = 2 * 4 = 8cm.'
      },
      {
        id: 'q_cen_4',
        type: 'INPUT',
        question: 'Растојанието од тежиштето до страната е 3cm. Колку е растојанието од тежиштето до темето?',
        correctAnswer: '6',
        hint: 'Делот кон темето е двапати подолг од делот кон страната.',
        explanation: '3 * 2 = 6cm.'
      }
    ]
  },
  {
    id: ModuleId.ORTHOCENTER,
    title: 'Ортоцентар',
    description: 'Научи што се висини и пронајди го Ортоцентарот.',
    goals: [
        'Да дефинираш висина во триаголник (нормала на спротивна страна).',
        'Да знаеш дека ортоцентарот е пресек на висините.',
        'Да ја разликуваш положбата на ортоцентарот кај остроаголен, правоаголен и тапоаголен триаголник.'
    ],
    icon: 'crosshair',
    color: 'bg-violet-500',
    lessonRoot: ORTHOCENTER_LESSON,
    quiz: [
      {
        id: 'q_ortho_1',
        type: 'MCQ',
        question: 'Под кој агол паѓа висината на страната?',
        options: ['30°', '60°', '90° (Прав агол)', 'Зависи од триаголникот'],
        correctIndex: 2,
        explanation: 'Висината е секогаш нормална на страната, што значи формира агол од 90 степени.'
      },
      {
        id: 'q_ortho_2',
        type: 'MCQ',
        question: 'Како се вика точката каде се сечат трите висини?',
        options: ['Тежиште', 'Ортоцентар', 'Центар на опишана кружница', 'Центар на впишана кружница'],
        correctIndex: 1,
        explanation: 'Пресекот на висините се вика Ортоцентар.'
      },
      {
        id: 'q_ortho_3',
        type: 'MCQ',
        question: 'Каде се наоѓа ортоцентарот кај правоаголен триаголник?',
        options: ['Во средината на хипотенузата', 'Во внатрешноста', 'Надвор од триаголникот', 'Во темето на правиот агол'],
        correctIndex: 3,
        explanation: 'Кај правоаголен триаголник, катетите се воедно и висини, па тие се сечат во темето на правиот агол.'
      },
      {
        id: 'q_ortho_4',
        type: 'MCQ',
        question: 'Каде лежи ортоцентарот кај тапоаголен триаголник?',
        options: ['Внатре', 'Надвор', 'На најдолгата страна', 'Не постои'],
        correctIndex: 1,
        hint: 'Обиди се да нацрташ висини на тап агол. Ќе видиш дека треба да ги продолжиш страните.',
        explanation: 'Кај тапоаголен триаголник, висините спуштени кон краците паѓаат на нивните продолженија, па пресекот е надвор.'
      }
    ]
  },
  {
    id: ModuleId.CIRCUMCIRCLE,
    title: 'Опишана кружница',
    description: 'Откриј ја кружницата што поминува низ сите темиња и нејзиниот центар.',
    goals: [
        'Да знаеш што е опишана кружница (ги допира сите темиња).',
        'Да научиш дека центарот се наоѓа во пресекот на симетралите на страните.',
        'Да ја идентификуваш положбата на центарот кај различни видови триаголници (внатре, надвор, на хипотенуза).'
    ],
    icon: 'circle', // Using a simple identifier, App.tsx handles the actual icon
    color: 'bg-cyan-500',
    lessonRoot: CIRCUMCIRCLE_LESSON,
    quiz: [
      {
        id: 'q_circ_1',
        type: 'MCQ',
        question: 'Каде се сечат симетралите на страните?',
        options: ['Во тежиштето', 'Во ортоцентарот', 'Во центарот на опишана кружница', 'Во центарот на впишана кружница'],
        correctIndex: 2,
        explanation: 'Пресекот на симетралите на страните е центарот на опишаната кружница.'
      },
      {
        id: 'q_circ_2',
        type: 'MCQ',
        question: 'Каде се наоѓа центарот на опишана кружница кај правоаголен триаголник?',
        options: ['Во темето на правиот агол', 'Во внатрешноста', 'На средината на хипотенузата', 'Надвор'],
        correctIndex: 2,
        explanation: 'Ова е специфично својство: кај правоаголен триаголник центарот е точно на средината на најдолгата страна (хипотенузата).'
      },
      {
        id: 'q_circ_3',
        type: 'MCQ',
        question: 'Низ кои точки поминува опишаната кружница?',
        options: ['Низ средините на страните', 'Низ трите темиња', 'Низ подножјата на висините', 'Само низ две темиња'],
        correctIndex: 1,
        explanation: 'Опишаната кружница ги допира сите три темиња на триаголникот.'
      },
      {
        id: 'q_circ_4',
        type: 'MCQ',
        question: 'Кај тапоаголен триаголник, каде лежи центарот на опишаната кружница?',
        options: ['Внатре во триаголникот', 'Надвор од триаголникот', 'На една од страните', 'Во темето'],
        correctIndex: 1,
        hint: 'Замисли голема кружница околу широк (тап) триаголник.',
        explanation: 'Кај тапоаголните триаголници, центарот на опишаната кружница секогаш лежи надвор од триаголникот.'
      }
    ]
  },
  {
    id: ModuleId.INCIRCLE,
    title: 'Впишана кружница',
    description: 'Научи што е впишана кружница и како се конструира со симетрали на агли.',
    goals: [
        'Да знаеш што е впишана кружница (ги допира сите страни).',
        'Да научиш дека центарот се наоѓа во пресекот на симетралите на аглите.',
        'Да запаметиш дека центарот на впишаната кружница е секогаш во внатрешноста на триаголникот.'
    ],
    icon: 'circle-dot', 
    color: 'bg-orange-500',
    lessonRoot: INCIRCLE_LESSON,
    quiz: [
      {
        id: 'q_inc_1',
        type: 'MCQ',
        question: 'Каде се сечат симетралите на аглите?',
        options: ['Во тежиштето', 'Во ортоцентарот', 'Во центарот на опишана кружница', 'Во центарот на впишана кружница'],
        correctIndex: 3,
        explanation: 'Симетралите на внатрешните агли се сечат во центарот на впишаната кружница.'
      },
      {
        id: 'q_inc_2',
        type: 'MCQ',
        question: 'Што допира впишаната кружница?',
        options: ['Трите темиња', 'Трите страни', 'Само две страни', 'Средините на страните'],
        correctIndex: 1,
        explanation: 'Впишаната кружница ги допира сите три страни од внатрешната страна.'
      },
      {
        id: 'q_inc_3',
        type: 'MCQ',
        question: 'Каде лежи центарот на впишаната кружница кај тапоаголен триаголник?',
        options: ['Внатре во триаголникот', 'Надвор од триаголникот', 'На една од страните', 'Зависи од аголот'],
        correctIndex: 0,
        explanation: 'За разлика од опишаната кружница, центарот на впишаната кружница е СЕКОГАШ внатре во триаголникот.'
      }
    ]
  },
  {
    id: ModuleId.EXISTENCE,
    title: 'Егзистенција на триаголник',
    description: 'Кои должини на отсечки можат да формираат триаголник? Научи го правилото.',
    goals: [
        'Да го применуваш правилото: Збирот на две страни е поголем од третата.',
        'Да проверуваш дали три дадени отсечки можат да формираат триаголник.',
        'Да разбираш зошто "прекратки" страни не можат да се спојат.'
    ],
    icon: 'ruler',
    color: 'bg-teal-500',
    lessonRoot: EXISTENCE_LESSON,
    quiz: [
      {
        id: 'q_exist_1',
        type: 'MCQ',
        question: 'Дали може да постои триаголник со страни 2cm, 3cm и 6cm?',
        options: ['Да', 'Не', 'Само ако е правоаголен'],
        correctIndex: 1,
        explanation: '2 + 3 = 5, што е помало од 6. Најдолгата страна мора да биде помала од збирот на другите две.'
      },
      {
        id: 'q_exist_2',
        type: 'MCQ',
        question: 'Кој од наведените групи страни формира триаголник?',
        options: ['2, 2, 5', '3, 4, 8', '5, 6, 10', '1, 2, 3'],
        correctIndex: 2,
        explanation: 'Кај (5, 6, 10), најголемата страна 10 е помала од 5+6=11. Останатите комбинации не го задоволуваат условот.'
      },
      {
        id: 'q_exist_3',
        type: 'MCQ',
        question: 'Што се случува ако збирот на две страни е ЕДНАКОВ на третата (на пр. 2, 3, 5)?',
        options: ['Се добива триаголник', 'Се добива права линија', 'Се добива квадрат'],
        correctIndex: 1,
        explanation: 'Точките лежат на иста права (колинеарни се), па не се формира триаголник.'
      }
    ]
  },
  {
    id: ModuleId.SIDE_ANGLE_RELATION,
    title: 'Однос страни и агли',
    description: 'Зошто наспроти најголемиот агол лежи најголемата страна? Откриј ја врската.',
    goals: [
        'Да го разбереш правилото: Наспроти поголем агол лежи поголема страна.',
        'Да одредуваш која е најдолга или најкратка страна според дадени агли.',
        'Да знаеш зошто хипотенузата е секогаш најдолга страна во правоаголен триаголник.'
    ],
    icon: 'scale',
    color: 'bg-pink-500',
    lessonRoot: SIDE_ANGLE_RELATION_LESSON,
    quiz: [
      {
        id: 'q_rel_1',
        type: 'MCQ',
        question: 'Ако во триаголник агол α=80°, β=60°, γ=40°, која страна е најдолга?',
        options: ['a', 'b', 'c', 'сите се исти'],
        correctIndex: 0,
        explanation: 'Најголемиот агол е α (80°), па најдолгата страна е онаа наспроти него (a).'
      },
      {
        id: 'q_rel_2',
        type: 'MCQ',
        question: 'Во правоаголен триаголник, зошто хипотенузата е најдолга?',
        options: ['Затоа што лежи наспроти правиот агол (90°)', 'Случајно е така', 'Затоа што другите агли се тапи', 'Не е секогаш најдолга'],
        correctIndex: 0,
        explanation: 'Правиот агол е најголем во тој триаголник (другите мора да се остри), па страната наспроти него е најдолга.'
      },
      {
        id: 'q_rel_3',
        type: 'MCQ',
        question: 'Ако страните се a=5, b=10, c=12, кој агол е најмал?',
        options: ['α (наспроти a)', 'β (наспроти b)', 'γ (наспроти c)'],
        correctIndex: 0,
        explanation: 'Најкратката страна е a=5, па најмалиот агол е оној наспроти неа (α).'
      }
    ]
  },
  {
    id: ModuleId.FINAL_QUIZ,
    title: 'ПРОВЕРИ ГО СВОЕТО ЗНАЕЊЕ',
    description: 'Завршен предизвик: Сите лекции во еден голем квиз! Дали си подготвен да станеш мајстор за триаголници?',
    goals: [
        'Да ги повториш сите научени концепти.',
        'Да ги тестираш своите вештини во решавање задачи од различни области.',
        'Да освоиш значка за „Геометриски Мајстор“!'
    ],
    icon: 'award',
    color: 'bg-gradient-to-r from-violet-600 to-fuchsia-600',
    lessonRoot: FINAL_REVIEW_LESSON,
    quiz: [
       // Q1: Types (Drag Drop)
       {
        id: 'fq_types_sort',
        type: 'DRAG_DROP',
        question: 'Подреди ги триаголниците во соодветните кутии според должината на страните:',
        buckets: ['Рамностран', 'Рамнокрак', 'Разностран'],
        items: [
          { id: 'f1', content: SVG_EQUILATERAL, category: 'Рамностран' },
          { id: 'f2', content: SVG_ISOSCELES, category: 'Рамнокрак' },
          { id: 'f3', content: SVG_SCALENE, category: 'Разностран' },
          { id: 'f4', content: SVG_EQUILATERAL, category: 'Рамностран' },
          { id: 'f5', content: SVG_ISOSCELES, category: 'Рамнокрак' }
        ]
      },
      // Q2: Internal Angles (Input)
      {
        id: 'fq_internal_calc',
        type: 'INPUT',
        question: 'Во триаголник, два агли се 45° и 45°. Колку степени изнесува третиот агол?',
        correctAnswer: '90',
        hint: 'Збирот е 180. Третиот агол е 180 - (45 + 45).',
        explanation: '180° - 90° = 90°. Ова е рамнокрак правоаголен триаголник.'
      },
      // Q3: Existence (MCQ)
      {
        id: 'fq_existence',
        type: 'MCQ',
        question: 'Дали може да се конструира триаголник со страни 4, 5 и 10?',
        options: ['Да', 'Не', 'Зависи од аглите'],
        correctIndex: 1,
        explanation: 'Не, бидејќи 4 + 5 = 9, а 9 е помало од 10. (a + b мора да е поголемо од c).'
      },
      // Q4: Middle Line (MCQ Visual)
      {
        id: 'fq_midline',
        type: 'MCQ',
        question: 'Ако основната страна AB е 20cm, колку е долга средната линија DE која е паралелна со неа?',
        options: ['20cm', '10cm', '40cm', '15cm'],
        correctIndex: 1,
        explanation: 'Средната линија е секогаш половина од паралелната страна. 20 / 2 = 10cm.'
      },
      // Q5: External Angles (Input)
      {
        id: 'fq_ext_angle',
        type: 'INPUT',
        question: 'Надворешниот агол е 150°. Еден несоседен внатрешен агол е 50°. Колку е другиот несоседен внатрешен агол?',
        correctAnswer: '100',
        hint: 'Надворешниот агол е збир на двата внатрешни несоседни агли. 150 = 50 + x.',
        explanation: 'x = 150° - 50° = 100°.'
      },
      // Q6: Centroid Ratio (MCQ)
      {
        id: 'fq_centroid',
        type: 'MCQ',
        question: 'Во кој однос тежиштето ја дели тежишната линија (гледано од темето)?',
        options: ['1:1', '1:2', '2:1', '3:1'],
        correctIndex: 2,
        explanation: 'Правилото гласи 2:1. Поголемиот дел е од темето до тежиштето.'
      },
      // Q7: Points Identification (MCQ)
      {
        id: 'fq_ortho_def',
        type: 'MCQ',
        question: 'Која значајна точка се добива во пресекот на висините?',
        options: ['Ортоцентар', 'Тежиште', 'Центар на впишана кружница', 'Центар на опишана кружница'],
        correctIndex: 0,
        explanation: 'Висините се сечат во Ортоцентар.'
      },
      // Q8: Side-Angle Relation (MCQ)
      {
        id: 'fq_relation',
        type: 'MCQ',
        question: 'Ако страните се a=7, b=9, c=5, кој агол е најголем?',
        options: ['α (алфа)', 'β (бета)', 'γ (гама)'],
        correctIndex: 1,
        explanation: 'Најголемиот агол лежи наспроти најдолгата страна. b=9 е најдолга, значи β е најголем.'
      },
      // Q9: Incircle (Input) - Conceptual check via multiple choice actually fits better, but let's try input for simple concept
      {
        id: 'fq_incircle_pos',
        type: 'MCQ',
        question: 'Каде се наоѓа центарот на впишаната кружница кај тапоаголен триаголник?',
        options: ['Внатре', 'Надвор', 'На најдолгата страна'],
        correctIndex: 0,
        explanation: 'Впишаната кружница е секогаш внатре, без разлика на видот на триаголникот.'
      },
      // Q10: Circumcircle (Visual/Logic)
      {
        id: 'fq_circum_right',
        type: 'MCQ',
        question: 'Каде се наоѓа центарот на опишана кружница кај правоаголен триаголник?',
        options: ['Во темето на правиот агол', 'На средината на хипотенузата', 'Во внатрешноста'],
        correctIndex: 1,
        explanation: 'Кај правоаголен триаголник, центарот на опишаната кружница е точно на средината на хипотенузата.'
      }
    ]
  }
];